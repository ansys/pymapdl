
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-JQJKPV6ZVB"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-JQJKPV6ZVB');
    </script>
    
    <title>Windows Subsystem for Linux &#8212; PyMAPDL</title>
    
<script>
  document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
  document.documentElement.dataset.theme = localStorage.getItem("theme") || "light"
</script>

  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=92025949c220c2e29695" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=92025949c220c2e29695" rel="stylesheet">


  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/jupyter-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../_static/thebelab.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/ansys_sphinx_theme.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-binder.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-dataframe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-rendered-html.css" />

  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=92025949c220c2e29695">

    
        <link href="../_static/css/breadcrumbs.css" rel="stylesheet">
    
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/thebelab-helper.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
    <link rel="shortcut icon" href="../_static/ansys-favicon.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Julia and PyMAPDL" href="using_julia.html" />
    <link rel="prev" title="Standard installation" href="running_mapdl.html" />
<link rel="stylesheet" type="text/css" href="../_static/custom.css" />


  </head>
  
  
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="180" data-default-mode="">
    <div class="bd-header-announcement container-fluid" id="banner">
      

    </div>

    
    
    <nav class="bd-header navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="bd-header__inner container-xl">

  <div id="navbar-start">
    
    
  


<a class="navbar-brand logo" href="../index.html">
  
  
  
  
    <img src="../_static/pyansys-logo-black-cropped.png" class="logo__image only-light" alt="Logo image">
    <img src="../_static/pyansys-logo-black-cropped.png" class="logo__image only-dark" alt="Logo image">
  
  
</a>
    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="fas fa-bars"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 current active nav-item">
 <a class="reference internal nav-link" href="index.html">
  Getting started
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../user_guide/index.html">
  User guide
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../mapdl_commands/index.html">
  MAPDL commands
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../api/index.html">
  API reference
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../examples/index.html">
  Examples
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <div class="dropdown" id="version_switcher">
    <button type="button" class="btn btn-sm navbar-btn dropdown-toggle" id="version_switcher_button" data-toggle="dropdown">
        0.64  <!-- this text may get changed later by javascript -->
        <span class="caret"></span>
    </button>
    <div id="version_switcher_menu" class="dropdown-menu list-group-flush py-0" aria-labelledby="version_switcher_button">
    <!-- dropdown will be populated by javascript on page load -->
    </div>
</div>

<!-- NOTE: this JS must live here (not in our global JS file) because it relies
     on being processed by Jinja before it is run (specifically for replacing
     variables getting_started/wsl and {'json_url': 'https://mapdl.docs.pyansys.com/release/versions.json', 'version_match': '0.64'}.
-->

<script type="text/javascript">
// Check if corresponding page path exists in other version of docs
// and, if so, go there instead of the homepage of the other docs version
function checkPageExistsAndRedirect(event) {
    const currentFilePath = "getting_started/wsl.html",
          tryUrl = event.target.getAttribute("href");
    let otherDocsHomepage = tryUrl.replace(currentFilePath, "");
    $.ajax({
        type: 'HEAD',
        url: tryUrl,
        // if the page exists, go there
        success: function() {
            location.href = tryUrl;
        }
    }).fail(function() {
        location.href = otherDocsHomepage;
    });
    // this prevents the browser from following the href of the clicked node
    // (which is fine because this function takes care of redirecting)
    return false;
}

// Populate the version switcher from the JSON config file
(function () {
    $.getJSON("https://mapdl.docs.pyansys.com/release/versions.json", function(data, textStatus, jqXHR) {
        const currentFilePath = "getting_started/wsl.html";
        let btn = document.getElementById("version_switcher_button");
        // Set empty strings by default so that these attributes exist and can be used in CSS selectors
        btn.dataset["activeVersionName"] = "";
        btn.dataset["activeVersion"] = "";
        // create links to the corresponding page in the other docs versions
        $.each(data, function(index, entry) {
            // if no custom name specified (e.g., "latest"), use version string
            if (!("name" in entry)) {
                entry.name = entry.version;
            }
            // create the node
            const node = document.createElement("a");
            node.setAttribute("class", "list-group-item list-group-item-action py-1");
            node.textContent = `${entry.name}`;
            node.setAttribute("href", `${entry.url}${currentFilePath}`);
            // on click, AJAX calls will check if the linked page exists before
            // trying to redirect, and if not, will redirect to the homepage
            // for that version of the docs.
            node.onclick = checkPageExistsAndRedirect;
            // Add dataset values for the version and name in case people want
            // to apply CSS styling based on this information.
            node.dataset["versionName"] = entry.name;
            node.dataset["version"] = entry.version;

            $("#version_switcher_menu").append(node);
            // replace dropdown button text with the preferred display name of
            // this version, rather than using sphinx's 0.64.0 variable.
            // also highlight the dropdown entry for the currently-viewed
            // version's entry
            if (entry.version == "0.64") {
                node.classList.add("active");
                btn.innerText = btn.dataset["activeVersionName"] = entry.name;
                btn.dataset["activeVersion"] = entry.version;
            }
        });
    });
})();
</script>
      </div>
      
      <div class="navbar-end-item">
        <span id="theme-switch" class="btn btn-sm btn-outline-primary navbar-btn rounded-circle">
    <a class="theme-switch" data-mode="light"><i class="fas fa-sun"></i></a>
    <a class="theme-switch" data-mode="dark"><i class="far fa-moon"></i></a>
    <a class="theme-switch" data-mode="auto"><i class="fas fa-adjust"></i></a>
</span>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/pyansys/pymapdl" rel="noopener" target="_blank" title="GitHub"><span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/pyansys/pymapdl/discussions" rel="noopener" target="_blank" title="Support"><span><i class="fa fa-comment fa-fw"></i></span>
            <label class="sr-only">Support</label></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://mapdl.docs.pyansys.com/release/dev/getting_started/contribution.html" rel="noopener" target="_blank" title="Contribute"><span><i class="fa fa-wrench"></i></span>
            <label class="sr-only">Contribute</label></a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    
     
<div id="announcement_msg"></div>
<script>
  fetch("announcement.html")
    .then((response) => {
      if (!response.ok) {
        throw new Error(`HTTP error: ${response.status}`);
      }
      return response.text();
    })
    .then(text => document.getElementById("announcement_msg").innerHTML = text)
    .catch((error) => console.error(`Fetch problem: ${error.message}`));
</script>

    
        <div class="container-xl">
    <div class="row">
        <div class="col-12 col-md-3" id="breadcrumbs-spacer"></div>
        <div class="col-12 col-md-11 col-xl-9" id="breadcrumbs">
          
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
    
        <li class="nav-item nav-item-additional-breadcrumb"><a href="https://docs.pyansys.com/">PyAnsys</a> » </li>
    
    
        <li class="nav-item nav-item-0"><a href="../index.html">PyMAPDL</a> » </li>
    

          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Getting started</a> » </li>
        <li class="nav-item nav-item-this"><a href="">Windows Subsystem for Linux</a></li> 
      </ul>
    </div>
        </div>
  </div>
</div>
    


    <div class="bd-container container-xl">
      <div class="bd-container__inner row">
          

<!-- Only show if we have sidebars configured, else just a small margin  -->
<div class="bd-sidebar-primary col-12 col-md-3 bd-sidebar">
  <div class="sidebar-start-items"><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="learning.html">
   Learning PyMAPDL
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="versioning.html">
   Versions and interfaces
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="running_mapdl.html">
   Standard installation
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Windows Subsystem for Linux
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="using_julia.html">
   Julia and PyMAPDL
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="faq.html">
   Frequently asked questions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="contribution.html">
   Contributing
  </a>
 </li>
</ul>

  </div>
</nav>
  </div>
  <div class="sidebar-end-items">
  </div>
</div>


          


<div class="bd-sidebar-secondary d-none d-xl-block col-xl-2 bd-toc">
  
    
    <div class="toc-item">
      
<div class="tocsection onthispage mt-5 pt-1 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#run-pymapdl-on-wsl">
   Run PyMAPDL on WSL
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#install-wsl">
     Install WSL
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#install-centos-7-wsl-distribution">
     Install CentOS 7 WSL distribution
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id1">
     Install CentOS 7 WSL distribution
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#install-ansys-products-in-wsl-centos-7">
     Install Ansys products in WSL CentOS 7
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#prerequisites">
       Prerequisites
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#install-ansys-products">
       Install Ansys products
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#post-installation-setup">
     Post-installation setup
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#open-ports">
       Open ports
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#set-up-an-environmental-variable-in-wsl-that-points-to-windows-host-license-server">
       Set up an environmental variable in WSL that points to Windows host license server
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#launch-mapdl-in-wsl">
     Launch MAPDL in WSL
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#connect-to-an-mapdl-instance-running-in-wsl">
     Connect to an MAPDL instance running in WSL
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#notes">
     Notes
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#additional-notes">
   Additional notes
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#other-ansys-installation-flags">
     Other Ansys installation flags
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#licserverinfo">
       <code class="docutils literal notranslate">
        <span class="pre">
         -licserverinfo
        </span>
       </code>
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#lang">
       <code class="docutils literal notranslate">
        <span class="pre">
         -lang
        </span>
       </code>
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#productfile">
       <code class="docutils literal notranslate">
        <span class="pre">
         -productfile
        </span>
       </code>
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#ip-addresses-in-wsl-and-the-windows-host">
     IP addresses in WSL and the Windows host
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#theory">
       Theory
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#reality">
       Reality
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#disable-firewall-on-wsl-ethernet">
     Disable firewall on WSL ethernet
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#windows-10-port-forwarding">
     Windows 10 port forwarding
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#link-ports-between-wsl-and-windows">
       Link ports between WSL and Windows
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#powershell-command-to-view-all-forwards">
       PowerShell command to view all forwards
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#delete-port-forwarding">
       Delete port forwarding
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#reset-windows-network-adapters">
     Reset Windows network adapters
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#restart-wsl-service">
     Restart WSL service
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#kill-all-processes-with-a-given-name">
     Kill all processes with a given name
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#install-xvfb-in-centos-7">
     Install
     <code class="docutils literal notranslate">
      <span class="pre">
       xvfb
      </span>
     </code>
     in CentOS 7
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id2">
   Notes
  </a>
 </li>
</ul>

</nav>
    </div>
    
    <div class="toc-item">
      

<div class="tocsection editthispage">
    <a href="https://github.com/pyansys/pymapdl/edit/main/doc/source/getting_started/wsl.rst">
        <i class="fas fa-pencil-alt"></i> Edit this page
    </a>
</div>

    </div>
    
  
</div>


          
          
          <div class="bd-content col-12 col-md-9 col-xl-7">
              
              <article class="bd-article" role="main">
                
  <blockquote>
<div></div></blockquote>
<section id="windows-subsystem-for-linux">
<span id="ref-guide-wsl"></span><h1>Windows Subsystem for Linux<a class="headerlink" href="#windows-subsystem-for-linux" title="Permalink to this heading">#</a></h1>
<p>This page shows you how to use a PyAnsys library, more specifically PyMAPDL,
in the Windows Subsystem for Linux (WSL). WSL is a compatibility layer for
running Linux binary executables natively on Windows 10, Windows 11, and
Windows Server 2019. For more information, see <a class="reference external" href="https://en.wikipedia.org/wiki/Windows_Subsystem_for_Linux">Wikipedia WSL</a>.</p>
<p>Sections on this page walk you through the installation of WSL on Windows and then
show how to use it together with MAPDL, PyMAPDL, and Docker.</p>
<p>For more information about WSL, see
<a class="reference external" href="https://docs.microsoft.com/en-us/windows/wsl/about">What is the Windows Subsystem for Linux</a>.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This approach hasn’t been fully tested with a VPN connection. If you
experience any problems connecting WSL to the internet, try to
disconnect from the VPN.</p>
</div>
<section id="run-pymapdl-on-wsl">
<h2>Run PyMAPDL on WSL<a class="headerlink" href="#run-pymapdl-on-wsl" title="Permalink to this heading">#</a></h2>
<section id="install-wsl">
<h3>Install WSL<a class="headerlink" href="#install-wsl" title="Permalink to this heading">#</a></h3>
<p>Install WSL by following Microsoft’s directions at
<a class="reference external" href="https://docs.microsoft.com/en-us/windows/wsl/install/">Microsoft: Install WSL</a>.</p>
<p>Currently there are two versions of WSL: WSL1 and WSL2. Because WSL2 is
the latest and includes many improvements over WSL1, using WSL2 is highly recommended.</p>
</section>
<section id="install-centos-7-wsl-distribution">
<h3>Install CentOS 7 WSL distribution<a class="headerlink" href="#install-centos-7-wsl-distribution" title="Permalink to this heading">#</a></h3>
</section>
<section id="id1">
<h3>Install CentOS 7 WSL distribution<a class="headerlink" href="#id1" title="Permalink to this heading">#</a></h3>
<p>You should use the CentOS 7 WSL distribution for working with PyAnsys
libraries.</p>
<p>You can install it using an unofficial WSL distribution from
<a class="reference external" href="https://github.com/wsldl-pg/CentWSL/">CentOS-WSL</a> or
<a class="reference external" href="https://github.com/mishamosher/CentOS-WSL/">CentOS WSL</a> .</p>
<p>Optionally, you can try Ubuntu, but it has not been tested yet in the context of WSL.</p>
</section>
<section id="install-ansys-products-in-wsl-centos-7">
<h3>Install Ansys products in WSL CentOS 7<a class="headerlink" href="#install-ansys-products-in-wsl-centos-7" title="Permalink to this heading">#</a></h3>
<section id="prerequisites">
<h4>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this heading">#</a></h4>
<p>If you are using CentOS 7, before installing MAPDL, you must install some
required libraries:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>yum<span class="w"> </span>install<span class="w"> </span>openssl<span class="w"> </span>openssh-clients<span class="w"> </span>mesa-libGL<span class="w"> </span>mesa-libGLU<span class="w"> </span>motif<span class="w"> </span>libgfortran
</pre></div>
</div>
<p>If you are using Ubuntu, follow the instructions in <a class="reference external" href="https://mapdl.docs.pyansys.com/troubleshoot/troubleshoot.html?#ubuntu">Run MAPDL: Ubuntu</a> .</p>
</section>
<section id="install-ansys-products">
<h4>Install Ansys products<a class="headerlink" href="#install-ansys-products" title="Permalink to this heading">#</a></h4>
<p>To install Ansys products in WSL Linux:</p>
<ol class="arabic">
<li><p>Download the <strong>Ansys Structures</strong> image from the customer portal (<a class="reference external" href="https://download.ansys.com/Current%20Release">Current
Release</a>).  If you are
downloading the image on a Windows machine, you should later copy it from
you downloads folder to  WSL.</p></li>
<li><p>Decompress the source code file (<code class="docutils literal notranslate"><span class="pre">tar.gz</span></code>) with:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>tar<span class="w"> </span>xvzf<span class="w"> </span>STRUCTURES_2021R2_LINX64.tgz
</pre></div>
</div>
</li>
<li><p>To install MAPDL, go into the uncompressed folder and type:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>./INSTALL<span class="w"> </span>-silent<span class="w"> </span>-install_dir<span class="w"> </span>/usr/ansys_inc/<span class="w"> </span>-mechapdl
</pre></div>
</div>
<p>where:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">-silent</span></code> : Initiates a silent installation (no GUI).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-install_dir</span> <span class="pre">/path/</span></code> : Specifies the directory to which the product or
license manager is to be installed. If you want to install to the default
location, you can omit the <code class="docutils literal notranslate"><span class="pre">-install_dir</span></code> argument. The default
location is <code class="docutils literal notranslate"><span class="pre">/ansys_inc</span></code> if the symbolic link is set. Otherwise, it
defaults to <code class="docutils literal notranslate"><span class="pre">/usr/ansys_inc</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-&lt;product_flag&gt;</span></code> : Specifies one or more specific products to install.
If you omit this argument, all products are installed.
See the list of valid product flags in Chapter 6 of the <em>ANSYS
Inc. Installation Guides</em> PDF. In this case, only MAPDL (<cite>-mechapdl</cite>) is
needed.</p></li>
</ul>
</li>
</ol>
<p>After installing MAPDL directly in <code class="docutils literal notranslate"><span class="pre">/ansys_inc</span></code> or in <code class="docutils literal notranslate"><span class="pre">/usr/ansys_inc</span></code>,
create a symbolic link with:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>ln<span class="w"> </span>-s<span class="w"> </span>/usr/ansys_inc<span class="w"> </span>/ansys_inc
</pre></div>
</div>
<p>By default, PyMAPDL expects the MAPDL executable to be in
<code class="docutils literal notranslate"><span class="pre">/usr/ansys_inc</span></code>. Whether you install it there or not, you should link that directory,
using a symbolic link, to your Ansys installation directory (<code class="docutils literal notranslate"><span class="pre">/*/ansys_inc</span></code>).</p>
</section>
</section>
<section id="post-installation-setup">
<h3>Post-installation setup<a class="headerlink" href="#post-installation-setup" title="Permalink to this heading">#</a></h3>
<section id="open-ports">
<h4>Open ports<a class="headerlink" href="#open-ports" title="Permalink to this heading">#</a></h4>
<p><strong>Theory:</strong>
You should open the ports <code class="docutils literal notranslate"><span class="pre">1055</span></code> and <code class="docutils literal notranslate"><span class="pre">2325</span></code> for the license server
communication in <strong>Windows Firewall Advanced</strong>. You can see the steps in
<a class="reference external" href="https://answers.microsoft.com/en-us/windows/forum/all/how-to-open-port-in-windows-10-firewall/f38f67c8-23e8-459d-9552-c1b94cca579a/">How to open port in Windows 10 Firewall</a>.</p>
<p><strong>Reality:</strong>
This works if you want to run a Docker image using WSL Linux image to host that
Docker image. The Docker image successfully communicates with the Windows
License Server using these ports if you use the <code class="docutils literal notranslate"><span class="pre">'-p'</span></code> flag when running the
Docker image and these ports are open.
For more information, see <cite>Run an MAPDL image &lt;run_an_mapdl_image_&gt;</cite>.</p>
<p>If you want to run MAPDL in the CentOS 7 image and use the Windows license
server, opening the ports might not work properly because the Windows firewall
seems to block all traffic coming from WSL. For security purposes, you should
still try to open ports <code class="docutils literal notranslate"><span class="pre">1055</span></code> and <code class="docutils literal notranslate"><span class="pre">2325</span></code> in the firewall and see if your
MAPDL installation can communicate with the Windows hosts. If you are having
problems after setting the firewall rules, you might have to turn off the Windows
firewall for the WSL ethernet virtual interface. This might pose some unknown
side effects and security risk so use it with caution.
See <a class="reference external" href="https://github.com/cascadium/wsl-windows-toolbar-launcher#firewall-rules">Disabling Firewall on WSL Ethernet</a>.</p>
</section>
<section id="set-up-an-environmental-variable-in-wsl-that-points-to-windows-host-license-server">
<h4>Set up an environmental variable in WSL that points to Windows host license server<a class="headerlink" href="#set-up-an-environmental-variable-in-wsl-that-points-to-windows-host-license-server" title="Permalink to this heading">#</a></h4>
<p>The Windows host IP address is given in the WSL file <code class="docutils literal notranslate"><span class="pre">/etc/hosts</span></code> before the name
<code class="docutils literal notranslate"><span class="pre">host.docker.internal</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This <code class="docutils literal notranslate"><span class="pre">host.docker.internal</span></code> definition might not be available if Docker is
not installed.</p>
</div>
<p><strong>Example /etc/hosts/ file</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># This file was automatically generated by WSL.</span>
<span class="c1"># To stop automatic generation of this file, add the following entry to /etc/wsl.conf:</span>
<span class="c1"># [network]</span>
<span class="c1"># generateHosts = false</span>
<span class="m">127</span>.0.0.1<span class="w">       </span>localhost
<span class="m">127</span>.0.1.1<span class="w">       </span>AAPDDqVK5WqNLve.win.ansys.com<span class="w">   </span>AAPDDqVK5WqNLve

<span class="hll"><span class="m">192</span>.168.0.12<span class="w">    </span>host.docker.internal
</span><span class="m">192</span>.168.0.12<span class="w">    </span>gateway.docker.internal
<span class="m">127</span>.0.0.1<span class="w">       </span>kubernetes.docker.internal

<span class="c1"># The following lines are desirable for IPv6 capable hosts</span>
::1<span class="w">     </span>ip6-localhost<span class="w"> </span>ip6-loopback
fe00::0<span class="w"> </span>ip6-localnet
ff00::0<span class="w"> </span>ip6-mcastprefix
ff02::1<span class="w"> </span>ip6-allnodes
ff02::2<span class="w"> </span>ip6-allrouters
</pre></div>
</div>
<p>You can add the next lines to your WSL <code class="docutils literal notranslate"><span class="pre">~/.bashrc</span></code> file to create an
environment variable with this IP address:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">winhostIP</span><span class="o">=</span><span class="k">$(</span>grep<span class="w"> </span>-m<span class="w"> </span><span class="m">1</span><span class="w"> </span>host.docker.internal<span class="w"> </span>/etc/hosts<span class="w"> </span><span class="p">|</span><span class="w"> </span>awk<span class="w"> </span><span class="s1">&#39;{print $1}&#39;</span><span class="k">)</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">ANSYSLMD_LICENSE_FILE</span><span class="o">=</span><span class="m">1055</span>@<span class="nv">$winhostIP</span>
</pre></div>
</div>
</section>
</section>
<section id="launch-mapdl-in-wsl">
<h3>Launch MAPDL in WSL<a class="headerlink" href="#launch-mapdl-in-wsl" title="Permalink to this heading">#</a></h3>
<p>To launch MAPDL in WSL, you must follow the procedure in
<cite>Launch a gRPC MAPDL session &lt;launch_grpc_madpl_session_&gt;</cite>.
An example follows.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>/ansys_inc/v222/ansys/bin/ansys222<span class="w"> </span>-grpc
</pre></div>
</div>
<p>This launches an MAPDL instance whose working directory is the current directory.
If you want to change the working directory, you can use the <code class="docutils literal notranslate"><span class="pre">-dir</span></code> flag.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>/ansys_inc/v222/ansys/bin/ansys222<span class="w"> </span>-grpc<span class="w"> </span>-dir<span class="w"> </span>/tmp/ansys_jobs/myjob
</pre></div>
</div>
</section>
<section id="connect-to-an-mapdl-instance-running-in-wsl">
<h3>Connect to an MAPDL instance running in WSL<a class="headerlink" href="#connect-to-an-mapdl-instance-running-in-wsl" title="Permalink to this heading">#</a></h3>
<p>To connect to the WSL instance that is running the MAPDL instance, follow the
procedure in
<cite>Connect to the MAPDL container from Python &lt;pymapdl_connect_to_MAPDL_container_&gt;</cite>
but specify the IP address of the WSL instance:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">ansys.mapdl.core</span> <span class="kn">import</span> <span class="n">Mapdl</span>

<span class="n">mapdl</span> <span class="o">=</span> <span class="n">Mapdl</span><span class="p">(</span><span class="n">ip</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">50053</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="notes">
<h3>Notes<a class="headerlink" href="#notes" title="Permalink to this heading">#</a></h3>
<p>The specified IP address <code class="docutils literal notranslate"><span class="pre">127.0.0.1</span></code> in <cite>Run an MAPDL image &lt;run_an_mapdl_image_&gt;</cite> is
the IP address of WSL CentOS from the WSL perspective, whereas the Windows host IP address is
normally <code class="docutils literal notranslate"><span class="pre">127.0.1.1</span></code>. Docker builds the PyMAPDL images using the WSL
distribution as the base. Hence, PyMAPDL is running on a Linux WSL
distribution, which is running on a Windows host. Because the Docker image
shares resources with WSL, it also shares the internal IP address with the WSL
distribution.</p>
</section>
</section>
<section id="additional-notes">
<h2>Additional notes<a class="headerlink" href="#additional-notes" title="Permalink to this heading">#</a></h2>
<section id="other-ansys-installation-flags">
<h3>Other Ansys installation flags<a class="headerlink" href="#other-ansys-installation-flags" title="Permalink to this heading">#</a></h3>
<p>You can obtain license server information with one of the following, inspecting
the last lines of the <code class="docutils literal notranslate"><span class="pre">INSTALL</span></code> file:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./INSTALL<span class="w"> </span>--help
</pre></div>
</div>
<p>Or:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cat<span class="w"> </span>./INSTALL
</pre></div>
</div>
<section id="licserverinfo">
<h4><code class="docutils literal notranslate"><span class="pre">-licserverinfo</span></code><a class="headerlink" href="#licserverinfo" title="Permalink to this heading">#</a></h4>
<p>Specifies information to be used by the client for the license server.
Valid only in conjunction with a silent installation (INSTALL).</p>
<p>The format for a <strong>single license server</strong> is:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>-licserverinfo<span class="w"> </span>LI_port_number:FLEXlm_port_number:hostname
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./INSTALL<span class="w"> </span>-silent<span class="w"> </span>-install_dir<span class="w"> </span>/ansys_inc/<span class="w"> </span>-mechapdl<span class="w"> </span>-licserverinfo<span class="w"> </span><span class="m">2325</span>:1055:winhostIP
</pre></div>
</div>
<p>The format for <strong>three license servers</strong> is:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>-licserverinfo<span class="w"> </span>LI_port_number:FLEXlm_port_number:hostname1,hostname2,hostname3
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./INSTALL<span class="w"> </span>-silent<span class="w"> </span>-install_dir<span class="w"> </span>/ansys_inc/<span class="w"> </span>-mechapdl<span class="w"> </span>-licserverinfo<span class="w"> </span><span class="m">2325</span>:1055:abc,def,xyz
</pre></div>
</div>
</section>
<section id="lang">
<h4><code class="docutils literal notranslate"><span class="pre">-lang</span></code><a class="headerlink" href="#lang" title="Permalink to this heading">#</a></h4>
<p>Specifies a language to use for the installation of the product.</p>
</section>
<section id="productfile">
<h4><code class="docutils literal notranslate"><span class="pre">-productfile</span></code><a class="headerlink" href="#productfile" title="Permalink to this heading">#</a></h4>
<p>You can specify an <cite>options</cite> file that lists the products that you want to
install. To do so, you must provide a full path to the file containing the
products to install.</p>
</section>
</section>
<section id="ip-addresses-in-wsl-and-the-windows-host">
<h3>IP addresses in WSL and the Windows host<a class="headerlink" href="#ip-addresses-in-wsl-and-the-windows-host" title="Permalink to this heading">#</a></h3>
<section id="theory">
<h4>Theory<a class="headerlink" href="#theory" title="Permalink to this heading">#</a></h4>
<p>You should be able to access the Windows host using the IP address specified in <code class="docutils literal notranslate"><span class="pre">/etc/hosts</span></code>,
which normally is <code class="docutils literal notranslate"><span class="pre">127.0.1.1</span></code>. This means that the local WSL IP address is
<code class="docutils literal notranslate"><span class="pre">127.0.0.1</span></code>.</p>
</section>
<section id="reality">
<h4>Reality<a class="headerlink" href="#reality" title="Permalink to this heading">#</a></h4>
<p>It is almost impossible to use <code class="docutils literal notranslate"><span class="pre">127.0.1.1</span></code> for connecting to the Windows
host. However, it is possible to use the <code class="docutils literal notranslate"><span class="pre">host.docker.internal</span></code> hostname in the
same file (<code class="docutils literal notranslate"><span class="pre">/etc/hosts</span></code>). This is an IP address that is randomly allocated, which is
an issue when you define the license server. However, if you update <code class="docutils literal notranslate"><span class="pre">.bashrc</span></code>
as mentioned earlier, this issue is solved.</p>
</section>
</section>
<section id="disable-firewall-on-wsl-ethernet">
<h3>Disable firewall on WSL ethernet<a class="headerlink" href="#disable-firewall-on-wsl-ethernet" title="Permalink to this heading">#</a></h3>
<p>This method shows a notification:</p>
<div class="highlight-pwsh notranslate"><div class="highlight"><pre><span></span><span class="nb">Set-NetFirewallProfile</span> <span class="n">-DisabledInterfaceAliases</span> <span class="s2">&quot;vEthernet (WSL)&quot;</span>
</pre></div>
</div>
<p>This method does not show a notification:</p>
<div class="highlight-pwsh notranslate"><div class="highlight"><pre><span></span><span class="n">powershell</span><span class="p">.</span><span class="n">exe</span> <span class="n">-Command</span> <span class="s2">&quot;Set-NetFirewallProfile -DisabledInterfaceAliases \&quot;</span><span class="n">vEthernet</span> <span class="p">(</span><span class="n">WSL</span><span class="p">)\</span><span class="s2">&quot;&quot;</span>
</pre></div>
</div>
<p>Link: <a class="reference external" href="https://github.com/cascadium/wsl-windows-toolbar-launcher#firewall-rules">Disabling Firewall on WSL Ethernet</a></p>
</section>
<section id="windows-10-port-forwarding">
<h3>Windows 10 port forwarding<a class="headerlink" href="#windows-10-port-forwarding" title="Permalink to this heading">#</a></h3>
<section id="link-ports-between-wsl-and-windows">
<h4>Link ports between WSL and Windows<a class="headerlink" href="#link-ports-between-wsl-and-windows" title="Permalink to this heading">#</a></h4>
<div class="highlight-pwsh notranslate"><div class="highlight"><pre><span></span><span class="n">netsh</span> <span class="n">interface</span> <span class="n">portproxy</span> <span class="n">add</span> <span class="n">v4tov4</span> <span class="n">listenport</span><span class="p">=</span><span class="n">1055</span> <span class="n">listenaddress</span><span class="p">=</span><span class="n">0</span><span class="p">.</span><span class="n">0</span><span class="p">.</span><span class="n">0</span><span class="p">.</span><span class="n">0</span> <span class="n">connectport</span><span class="p">=</span><span class="n">1055</span> <span class="n">connectaddress</span><span class="p">=</span><span class="n">XXX</span><span class="p">.</span><span class="n">XX</span><span class="p">.</span><span class="n">XX</span><span class="p">.</span><span class="n">XX</span>
</pre></div>
</div>
</section>
<section id="powershell-command-to-view-all-forwards">
<h4>PowerShell command to view all forwards<a class="headerlink" href="#powershell-command-to-view-all-forwards" title="Permalink to this heading">#</a></h4>
<div class="highlight-pwsh notranslate"><div class="highlight"><pre><span></span><span class="n">netsh</span> <span class="n">interface</span> <span class="n">portproxy</span> <span class="n">show</span> <span class="n">v4tov4</span>
</pre></div>
</div>
</section>
<section id="delete-port-forwarding">
<h4>Delete port forwarding<a class="headerlink" href="#delete-port-forwarding" title="Permalink to this heading">#</a></h4>
<div class="highlight-pwsh notranslate"><div class="highlight"><pre><span></span><span class="n">netsh</span> <span class="n">interface</span> <span class="n">portproxy</span> <span class="n">delete</span> <span class="n">v4tov4</span> <span class="n">listenport</span><span class="p">=</span><span class="n">1055</span> <span class="n">listenaddres</span><span class="p">=</span><span class="n">0</span><span class="p">.</span><span class="n">0</span><span class="p">.</span><span class="n">0</span><span class="p">.</span><span class="n">0</span> <span class="n">protocol</span><span class="p">=</span><span class="n">tcp</span>
</pre></div>
</div>
</section>
</section>
<section id="reset-windows-network-adapters">
<h3>Reset Windows network adapters<a class="headerlink" href="#reset-windows-network-adapters" title="Permalink to this heading">#</a></h3>
<div class="highlight-pwsh notranslate"><div class="highlight"><pre><span></span><span class="n">netsh</span> <span class="n">int</span> <span class="n">ip</span> <span class="n">reset</span> <span class="n">all</span>
<span class="n">netsh</span> <span class="n">winhttp</span> <span class="n">reset</span> <span class="n">proxy</span>
<span class="n">ipconfig</span> <span class="p">/</span><span class="n">flushdns</span>
<span class="n">netsh</span> <span class="n">winsock</span> <span class="n">reset</span>
</pre></div>
</div>
</section>
<section id="restart-wsl-service">
<h3>Restart WSL service<a class="headerlink" href="#restart-wsl-service" title="Permalink to this heading">#</a></h3>
<div class="highlight-pwsh notranslate"><div class="highlight"><pre><span></span><span class="nb">Get-Service</span> <span class="n">LxssManager</span> <span class="p">|</span> <span class="nb">Restart-Service</span>
</pre></div>
</div>
</section>
<section id="kill-all-processes-with-a-given-name">
<h3>Kill all processes with a given name<a class="headerlink" href="#kill-all-processes-with-a-given-name" title="Permalink to this heading">#</a></h3>
<div class="highlight-pwsh notranslate"><div class="highlight"><pre><span></span><span class="nb">Get-Process</span> <span class="s2">&quot;ANSYS212&quot;</span> <span class="p">|</span> <span class="nb">Stop-Process</span>
</pre></div>
</div>
</section>
<section id="install-xvfb-in-centos-7">
<h3>Install <code class="docutils literal notranslate"><span class="pre">xvfb</span></code> in CentOS 7<a class="headerlink" href="#install-xvfb-in-centos-7" title="Permalink to this heading">#</a></h3>
<p>If you want to replicate the CI/CD behavior, <code class="docutils literal notranslate"><span class="pre">xvfb</span></code> is needed. For more
information, see the <code class="docutils literal notranslate"><span class="pre">.ci</span></code> folder.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>yum<span class="w"> </span>install<span class="w"> </span>xorg-x11-server-Xvfb
</pre></div>
</div>
</section>
</section>
<section id="id2">
<h2>Notes<a class="headerlink" href="#id2" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>PyMAPDL only works for shared-memory parallel (SMP) when running on WSL. This
is why the flag <code class="docutils literal notranslate"><span class="pre">-smp</span></code> should be included.</p></li>
<li><p>Because there are some incompatibilities between VPN and INTEL MPI, use the
flag <code class="docutils literal notranslate"><span class="pre">-mpi</span> <span class="pre">msmpi</span></code> when calling MAPDL.</p></li>
</ul>
</section>
</section>


              </article>
              

              
          </div>
          
      </div>
    </div>

  
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=92025949c220c2e29695"></script>

<footer class="bd-footer"><div class="bd-footer__inner container">
  
  <div class="footer-item">
    <p class="copyright">
    &copy; Copyright (c) 2023 ANSYS, Inc. All rights reserved.<br>
</p>
  </div>
  
  <div class="footer-item">
    <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 5.3.0.<br>
</p>
  </div>
  
</div>
</footer>
  </body>
</html>