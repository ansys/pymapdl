fix: using cached version for remove lock on exit