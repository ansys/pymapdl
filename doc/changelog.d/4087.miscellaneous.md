Fix: handle root directory case in test