steps:
- script: |
    cd ..
    git clone --single-branch --branch gh-pages https://$(github_pat)@github.com/akaszynski/pyansys.git
    ls pyansys
    git config user.email $(gh_email)
    git config user.name $(gh_user)
    cd $BUILD_SOURCESDIRECTORY
  displayName: Push to gh-pages

- task: UsePythonVersion@0
  inputs:
    versionSpec: '3.7'
  displayName: Select Python Version

- script: |
    python -m pip install -r requirements_build.txt
    python setup.py install
  displayName: Install pyansys

- script: |
    python -m pip install -r requirements_docs.txt
  displayName: Install Documentation Build Dependencies

- script: |
    mkdir -p dist
    rm -rf dist/*
    make -C docs html
  displayName: Build html Documentation